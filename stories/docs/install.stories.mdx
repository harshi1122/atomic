import { Meta, Story, Canvas } from "@storybook/addon-docs";

import { Source } from '../index';

<Meta title="Installation" />

# Installation

Atomic is delivered as an [npm package](https://www.npmjs.com/package/@locktech/atomic) which pulls in all third-party packages.

### Adding Atomic's npm package

> The command below is meant to be ran from the root of your RedwoodJS application, and adds the package to the *web*-side.

```bash
yarn workspace web add @locktech/atomic
```

### Atomic-Provider

Once installed, Atomic's root provider should be added to your `App`, wrapped around your application's `<Routes />`.

This component takes care of setting up Atomic and any third-party packages which require initalization.

* **goober** — To remain tiny, goober requires [a setup step](https://goober.js.org/api/setup), configuring it for the React library.
* **Recoil** — The provider [sets up Recoil](https://recoiljs.org/docs/introduction/getting-started#recoilroot) — making values stored in [Atom's](https://recoiljs.org/docs/basic-tutorial/atoms) available throughout your app.
* **Normalize** — Applies Atomic's CSS resets — syncing the default style of the web-page with your application's styling.
* **Theming** — Configure [global values](?path=/story/customize-theming-introduction--page), provided and used by Atomic to enforce a consistent design.
* **Style** — Customize [low-level styles](?path=/story/customize-styling-introduction--page), used to control the visual apperance of Atomic's components.

> Atomic's provider **should** be added as a child of `RedwoodApolloProvider`.

<Source file="web/src/App.js" language="jsx">
{`import { AtomicProvider } from '@locktech/atomic'
import { FatalErrorBoundary, RedwoodProvider } from '@redwoodjs/web'
import { RedwoodApolloProvider } from '@redwoodjs/web/apollo'\n
import FatalErrorPage from 'src/pages/FatalErrorPage'
import Routes from 'src/Routes'\n
import './index.css'\n
const App = () => (
  <FatalErrorBoundary page={FatalErrorPage}>
    <RedwoodProvider titleTemplate="%PageTitle | %AppTitle">
      <RedwoodApolloProvider>
        {/* Add and customize Atomic's provider */}
        <AtomicProvider ...>
          <Routes />
        </AtomicProvider>
      </RedwoodApolloProvider>
    </RedwoodProvider>
  </FatalErrorBoundary>
)`}
</Source>

### Next Steps

- See the [theming introduction](?path=/story/customize-theming-introduction--page) for details on customizing Atomic's colors, typography, and general appearance.
- Make low-level alterations to Atomic's apperance by customizing its [default styling](?path=/story/customize-styling-introduction--page).
- Start building your application's user interface by [dropping in a Button](?path=/story/components-button--default) or [building a Form](?path=/story/components-forms--default).
- Share values throughout your application using Atomic's [supported state APIs](?path=/story/state-introduction--page#introduction).
- [Add a custom font](?path=/story/guides-custom-fonts--page) to your application, to better convey your idea's brand and emotion.
