import { Meta, Story, Canvas } from "@storybook/addon-docs";

<Meta title="Installation" />

# Installation

Atomic is delivered as an [npm package](https://www.npmjs.com/package/@locktech/atomic) which pulls in all third-party packages.

### Adding Atomic's npm package

> The command below is meant to be ran from the root of your RedwoodJS application, and adds the package to the *web*-side.

```bash
yarn workspace web add @locktech/atomic
```

### Atomic-Provider

Once installed, Atomic's root provider should be added to your `App`, wrapped around your application's `<Routes />`.

This component takes care of setting up Atomic and any third-party packages which require initalization.

* **goober** — To remain tiny, goober requires [a setup step](https://goober.js.org/api/setup), configuring it for the React library.
* **Recoil** — The provider [sets up Recoil](https://recoiljs.org/docs/introduction/getting-started#recoilroot) — making values stored in [Atom's](https://recoiljs.org/docs/basic-tutorial/atoms) available throughout your app.
* **Normalize** — Applies Atomic's CSS resets — syncing the default style of the web-page with your application's styling.
* **Theming** — Configure [global values](?path=/story/customize-theming-introduction--page), provided and used by Atomic to enforce a consistent design.
* **Style** — Customize [low-level styles](?path=/story/customize-styling-introduction--page), used to control the visual apperance of Atomic's components.

> Atomic's provider **should** be added as a child of `RedwoodApolloProvider`.

```tsx
// App.js|tsx

import { AtomicProvider } from '@locktech/atomic'
import { FatalErrorBoundary, RedwoodProvider } from '@redwoodjs/web'
import { RedwoodApolloProvider } from '@redwoodjs/web/apollo'

import FatalErrorPage from 'src/pages/FatalErrorPage'
import Routes from 'src/Routes'

import './index.css'

const App = () => (
  <FatalErrorBoundary page={FatalErrorPage}>
    <RedwoodProvider titleTemplate="%PageTitle | %AppTitle">
      <RedwoodApolloProvider>
        {/* Add and customize Atomic's provider */}
        <AtomicProvider ...>
          <Routes />
        </AtomicProvider>
      </RedwoodApolloProvider>
    </RedwoodProvider>
  </FatalErrorBoundary>
)

export default App
```
